{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Desktop/Blog App/api/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Desktop/Blog App/api/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Desktop/Blog App/api/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Navigate,Link}from'react-router-dom';// Import Link\nimport{UserContext}from'../UserContext';import'./register.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var _useContext=useContext(UserContext),setUserInfo=_useContext.setUserInfo;function login(_x){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:ev.preventDefault();_context.next=3;return fetch(\"\".concat(window.location.origin,\"/login\"),{method:'POST',body:JSON.stringify({username:username,password:password}),headers:{'Content-Type':'application/json'},credentials:'include'});case 3:response=_context.sent;if(response.ok){response.json().then(function(userInfo){setUserInfo(userInfo);setRedirect(true);});}else{alert('wrong credentials');}case 5:case\"end\":return _context.stop();}},_callee);}));return _login.apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"register\",onSubmit:login,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your username or email\",value:username,onChange:function onChange(ev){return setUsername(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter Your Password\",value:password,onChange:function onChange(ev){return setPassword(ev.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Not registered yet?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"}),\" \"]})]});};export default LoginPage;","map":{"version":3,"names":["React","useContext","useState","Navigate","Link","UserContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","redirect","setRedirect","_useContext","setUserInfo","login","_x","_login","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ev","response","wrap","_callee$","_context","prev","next","preventDefault","fetch","concat","window","location","origin","method","body","JSON","stringify","headers","credentials","sent","ok","json","then","userInfo","alert","stop","to","children","className","onSubmit","type","placeholder","value","onChange","target"],"sources":["C:/Users/Admin/Desktop/Blog App/api/client/src/pages/LoginPage.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Navigate, Link } from 'react-router-dom'; // Import Link\r\nimport { UserContext } from '../UserContext';\r\nimport './register.css'\r\n\r\nconst LoginPage = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [redirect, setRedirect] = useState(false);\r\n  const { setUserInfo } = useContext(UserContext);\r\n\r\n  async function login(ev) {\r\n    ev.preventDefault();\r\n    const response = await fetch(`${window.location.origin}/login`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ username, password }),\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n    });\r\n    if (response.ok) {\r\n      response.json().then(userInfo => {\r\n        setUserInfo(userInfo);\r\n        setRedirect(true);\r\n      });\r\n    } else {\r\n      alert('wrong credentials');\r\n    }\r\n  }\r\n\r\n  if (redirect) {\r\n    return <Navigate to={'/'} />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <form className='register' onSubmit={login}>\r\n        <h1>Login</h1>\r\n        <input\r\n          type='text'\r\n          placeholder='Enter your username or email'\r\n          value={username}\r\n          onChange={ev => setUsername(ev.target.value)}\r\n        />\r\n        <input\r\n          type='password'\r\n          placeholder='Enter Your Password'\r\n          value={password}\r\n          onChange={ev => setPassword(ev.target.value)}\r\n        />\r\n        <button>Login</button>\r\n      </form>\r\n      <p>\r\n        Not registered yet?{' '}\r\n        <Link to=\"/register\">Register here</Link> {/* Link to the register page */}\r\n      </p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}